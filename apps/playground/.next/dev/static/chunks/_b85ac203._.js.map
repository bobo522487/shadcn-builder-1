{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/bobo/shadcn-builder/packages/designer/src/utils/schema.ts"],"sourcesContent":["import type { ComponentNode, FormSchema, Viewport } from \"@shadcn-builder/renderer\";\n\nfunction cloneOverrides(overrides?: ComponentNode[\"overrides\"]): ComponentNode[\"overrides\"] | undefined {\n  if (!overrides) return undefined;\n  const entries = Object.entries(overrides) as [Viewport, Partial<ComponentNode>][];\n  if (!entries.length) return undefined;\n  const next: Partial<Record<Viewport, Partial<ComponentNode>>> = {};\n  for (const [key, value] of entries) {\n    next[key] = value ? { ...value } : value;\n  }\n  return next;\n}\n\nexport function cloneNode(node: ComponentNode): ComponentNode {\n  return {\n    ...node,\n    attributes: node.attributes ? { ...node.attributes } : undefined,\n    properties: node.properties\n      ? {\n          ...node.properties,\n          style: node.properties.style ? { ...node.properties.style } : undefined,\n        }\n      : undefined,\n    overrides: cloneOverrides(node.overrides),\n    children: node.children ? node.children.map(cloneNode) : undefined,\n  };\n}\n\nexport function cloneSchema(schema: FormSchema): FormSchema {\n  return {\n    ...schema,\n    components: schema.components.map(cloneNode),\n  };\n}\n\nfunction normaliseIdBase(base: string): string {\n  const cleaned = base\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, \"-\")\n    .replace(/^-+|-+$/g, \"\");\n  return cleaned || \"component\";\n}\n\nfunction collectIdsFromNode(node: ComponentNode, target: Set<string>) {\n  target.add(node.id);\n  node.children?.forEach((child) => collectIdsFromNode(child, target));\n}\n\nexport function collectIds(schema: FormSchema): Set<string> {\n  const ids = new Set<string>();\n  schema.components.forEach((component) => collectIdsFromNode(component, ids));\n  return ids;\n}\n\nfunction nextAvailableId(base: string, taken: Set<string>): string {\n  const normalised = normaliseIdBase(base);\n  if (!taken.has(normalised)) return normalised;\n  let idx = 2;\n  while (taken.has(`${normalised}-${idx}`)) idx += 1;\n  return `${normalised}-${idx}`;\n}\n\nfunction attachIds(node: ComponentNode, taken: Set<string>, preferred?: string): ComponentNode {\n  const base = normaliseIdBase(preferred ?? node.id ?? node.type ?? \"component\");\n  const id = taken.has(base) ? nextAvailableId(base, taken) : base;\n  taken.add(id);\n  return {\n    ...cloneNode(node),\n    id,\n    children: node.children ? node.children.map((child) => attachIds(child, taken)) : undefined,\n  };\n}\n\nexport function prepareNodeForInsert(node: ComponentNode, schema: FormSchema): ComponentNode {\n  const taken = collectIds(schema);\n  return attachIds(node, taken);\n}\n\nexport function duplicateNode(node: ComponentNode, schema: FormSchema): ComponentNode {\n  const taken = collectIds(schema);\n  return attachIds(node, taken, node.id);\n}\n\nexport function replaceComponent(schema: FormSchema, id: string, next: ComponentNode): FormSchema {\n  return {\n    ...schema,\n    components: schema.components.map((component) => (component.id === id ? next : component)),\n  };\n}\n\nexport function removeComponent(schema: FormSchema, id: string): FormSchema {\n  return {\n    ...schema,\n    components: schema.components.filter((component) => component.id !== id),\n  };\n}\n\nexport function findComponent(schema: FormSchema, id: string): ComponentNode | undefined {\n  return schema.components.find((component) => component.id === id);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///home/bobo/shadcn-builder/packages/designer/src/state/store.ts"],"sourcesContent":["import { create } from \"zustand\";\nimport type { ComponentNode, FormSchema, Viewport } from \"@shadcn-builder/renderer\";\nimport {\n  cloneNode,\n  cloneSchema,\n  duplicateNode,\n  findComponent,\n  prepareNodeForInsert,\n  removeComponent,\n  replaceComponent,\n} from \"../utils/schema\";\n\ninterface HistoryState {\n  past: FormSchema[];\n  future: FormSchema[];\n  limit: number;\n}\n\ninterface DesignerState {\n  schema: FormSchema;\n  selectedId: string | null;\n  viewport: Viewport;\n  history: HistoryState;\n  setSchema: (next: FormSchema | ((prev: FormSchema) => FormSchema), options?: { pushHistory?: boolean; clearFuture?: boolean }) => void;\n  select: (id: string | null) => void;\n  setViewport: (viewport: Viewport) => void;\n  insertNode: (node: ComponentNode, options?: { index?: number }) => void;\n  updateSelected: (updater: (node: ComponentNode) => ComponentNode) => void;\n  removeSelected: () => void;\n  duplicateSelected: () => void;\n  reset: (schema: FormSchema) => void;\n  undo: () => void;\n  redo: () => void;\n}\n\nconst HISTORY_LIMIT = 100;\n\nfunction pruneHistory(value: FormSchema, history: HistoryState, direction: \"past\" | \"future\"): HistoryState {\n  const cloned = cloneSchema(value);\n  const list = direction === \"past\" ? [cloned, ...history.past] : [cloned, ...history.future];\n  if (direction === \"past\") {\n    return { ...history, past: list.slice(0, history.limit), future: [] };\n  }\n  return { ...history, future: list.slice(0, history.limit) };\n}\n\nfunction ensureSelection(schema: FormSchema, selectedId: string | null): string | null {\n  if (!selectedId) return null;\n  return findComponent(schema, selectedId) ? selectedId : null;\n}\n\nexport const useDesignerStore = create<DesignerState>((set, get) => ({\n  schema: { components: [] },\n  selectedId: null,\n  viewport: \"sm\",\n  history: { past: [], future: [], limit: HISTORY_LIMIT },\n  setSchema: (payload, options) => {\n    const pushHistory = options?.pushHistory ?? true;\n    const clearFuture = options?.clearFuture ?? pushHistory;\n    set((state) => {\n      const current = state.schema;\n      const resolved = typeof payload === \"function\" ? payload(current) : payload;\n      const nextSchema = cloneSchema(resolved);\n      let nextHistory = state.history;\n      if (pushHistory) {\n        nextHistory = pruneHistory(current, state.history, \"past\");\n      } else if (clearFuture && state.history.future.length) {\n        nextHistory = { ...state.history, future: [] };\n      }\n      const selectedId = ensureSelection(nextSchema, state.selectedId);\n      return { schema: nextSchema, history: nextHistory, selectedId };\n    });\n  },\n  select: (id) => set({ selectedId: id }),\n  setViewport: (viewport) => set({ viewport }),\n  insertNode: (node, options) => {\n    const state = get();\n    const prepared = prepareNodeForInsert(node, state.schema);\n    const index = Math.min(Math.max(options?.index ?? state.schema.components.length, 0), state.schema.components.length);\n    state.setSchema(\n      {\n        ...state.schema,\n        components: [\n          ...state.schema.components.slice(0, index),\n          prepared,\n          ...state.schema.components.slice(index),\n        ],\n      },\n      { pushHistory: true }\n    );\n    state.select(prepared.id);\n  },\n  updateSelected: (updater) => {\n    const state = get();\n    if (!state.selectedId) return;\n    const target = findComponent(state.schema, state.selectedId);\n    if (!target) return;\n    const nextNode = updater(cloneNode(target));\n    state.setSchema(replaceComponent(state.schema, state.selectedId, nextNode), { pushHistory: true });\n  },\n  removeSelected: () => {\n    const state = get();\n    if (!state.selectedId) return;\n    const exists = findComponent(state.schema, state.selectedId);\n    if (!exists) return;\n    state.setSchema(removeComponent(state.schema, state.selectedId), { pushHistory: true });\n    state.select(null);\n  },\n  duplicateSelected: () => {\n    const state = get();\n    if (!state.selectedId) return;\n    const target = findComponent(state.schema, state.selectedId);\n    if (!target) return;\n    const duplicated = duplicateNode(target, state.schema);\n    const index = state.schema.components.findIndex((c) => c.id === state.selectedId);\n    state.setSchema(\n      {\n        ...state.schema,\n        components: [\n          ...state.schema.components.slice(0, index + 1),\n          duplicated,\n          ...state.schema.components.slice(index + 1),\n        ],\n      },\n      { pushHistory: true }\n    );\n    state.select(duplicated.id);\n  },\n  reset: (schema) => {\n    const nextSchema = cloneSchema(schema);\n    set({\n      schema: nextSchema,\n      selectedId: ensureSelection(nextSchema, null),\n      history: { past: [], future: [], limit: HISTORY_LIMIT },\n    });\n  },\n  undo: () => {\n    const state = get();\n    const [previous, ...rest] = state.history.past;\n    if (!previous) return;\n    const restored = cloneSchema(previous);\n    set({\n      schema: restored,\n      selectedId: ensureSelection(restored, state.selectedId),\n      history: {\n        past: rest,\n        future: pruneHistory(state.schema, state.history, \"future\").future,\n        limit: state.history.limit,\n      },\n    });\n  },\n  redo: () => {\n    const state = get();\n    const [next, ...rest] = state.history.future;\n    if (!next) return;\n    const restored = cloneSchema(next);\n    set({\n      schema: restored,\n      selectedId: ensureSelection(restored, state.selectedId),\n      history: {\n        past: pruneHistory(state.schema, state.history, \"past\").past,\n        future: rest,\n        limit: state.history.limit,\n      },\n    });\n  },\n}));\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 296, "column": 0}, "map": {"version":3,"sources":["file:///home/bobo/shadcn-builder/packages/designer/src/panels/LeftPanel.tsx"],"sourcesContent":["\"use client\";\nimport React from \"react\";\nimport { useDesignerStore } from \"../state/store\";\nimport type { FormSchema, ComponentNode } from \"@shadcn-builder/renderer\";\n\nfunction generateId(prefix: string, schema: FormSchema) {\n  let i = 1;\n  while (schema.components.some((c) => c.id === `${prefix}-${i}`)) i++;\n  return `${prefix}-${i}`;\n}\n\nfunction Group({ title, children }: { title: string; children: React.ReactNode }) {\n  return (\n    <div className=\"mb-4\">\n      <div className=\"text-xs uppercase tracking-wide text-slate-500 mb-2\">{title}</div>\n      <div className=\"grid grid-cols-2 gap-2\">{children}</div>\n    </div>\n  );\n}\n\nexport function LeftPanel() {\n  const schema = useDesignerStore((s) => s.schema);\n  const setSchema = useDesignerStore((s) => s.setSchema);\n\n  const addComponent = (node: ComponentNode) => {\n    const withId = { ...node, id: generateId(node.type, schema) };\n    setSchema({ ...schema, components: [...schema.components, withId] });\n  };\n\n  return (\n    <div>\n      <Group title=\"Text\">\n        <button className=\"border px-2 py-1 rounded text-sm hover:bg-slate-50\" onClick={() => addComponent({ id: \"-\", type: \"text\", properties: { text: \"标题\", className: \"text-lg font-medium\" } })}>标题</button>\n        <button className=\"border px-2 py-1 rounded text-sm hover:bg-slate-50\" onClick={() => addComponent({ id: \"-\", type: \"text\", properties: { text: \"段落\", className: \"text-sm text-slate-600\" } })}>段落</button>\n      </Group>\n      <Group title=\"Form\">\n        <button className=\"border px-2 py-1 rounded text-sm hover:bg-slate-50\" onClick={() => addComponent({ id: \"-\", type: \"input\", attributes: { placeholder: \"请输入\" } })}>输入框</button>\n        <button className=\"border px-2 py-1 rounded text-sm hover:bg-slate-50\" onClick={() => addComponent({ id: \"-\", type: \"text\", properties: { text: \"按钮\", className: \"inline-flex items-center justify-center rounded-md border px-3 py-1.5 text-sm bg-slate-900 text-white\" } })}>按钮</button>\n      </Group>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAKA,SAAS,WAAW,MAAc,EAAE,MAAkB;IACpD,IAAI,IAAI;IACR,MAAO,OAAO,UAAU,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,GAAG,OAAO,CAAC,EAAE,GAAG,EAAG;IACjE,OAAO,GAAG,OAAO,CAAC,EAAE,GAAG;AACzB;AAEA,SAAS,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAgD;IAC9E,qBACE,8VAAC;QAAI,WAAU;;0BACb,8VAAC;gBAAI,WAAU;0BAAuD;;;;;;0BACtE,8VAAC;gBAAI,WAAU;0BAA0B;;;;;;;;;;;;AAG/C;KAPS;AASF,SAAS;;IACd,MAAM,SAAS,IAAA,oKAAgB;8CAAC,CAAC,IAAM,EAAE,MAAM;;IAC/C,MAAM,YAAY,IAAA,oKAAgB;iDAAC,CAAC,IAAM,EAAE,SAAS;;IAErD,MAAM,eAAe,CAAC;QACpB,MAAM,SAAS;YAAE,GAAG,IAAI;YAAE,IAAI,WAAW,KAAK,IAAI,EAAE;QAAQ;QAC5D,UAAU;YAAE,GAAG,MAAM;YAAE,YAAY;mBAAI,OAAO,UAAU;gBAAE;aAAO;QAAC;IACpE;IAEA,qBACE,8VAAC;;0BACC,8VAAC;gBAAM,OAAM;;kCACX,8VAAC;wBAAO,WAAU;wBAAqD,SAAS,IAAM,aAAa;gCAAE,IAAI;gCAAK,MAAM;gCAAQ,YAAY;oCAAE,MAAM;oCAAM,WAAW;gCAAsB;4BAAE;kCAAI;;;;;;kCAC7L,8VAAC;wBAAO,WAAU;wBAAqD,SAAS,IAAM,aAAa;gCAAE,IAAI;gCAAK,MAAM;gCAAQ,YAAY;oCAAE,MAAM;oCAAM,WAAW;gCAAyB;4BAAE;kCAAI;;;;;;;;;;;;0BAElM,8VAAC;gBAAM,OAAM;;kCACX,8VAAC;wBAAO,WAAU;wBAAqD,SAAS,IAAM,aAAa;gCAAE,IAAI;gCAAK,MAAM;gCAAS,YAAY;oCAAE,aAAa;gCAAM;4BAAE;kCAAI;;;;;;kCACpK,8VAAC;wBAAO,WAAU;wBAAqD,SAAS,IAAM,aAAa;gCAAE,IAAI;gCAAK,MAAM;gCAAQ,YAAY;oCAAE,MAAM;oCAAM,WAAW;gCAAwG;4BAAE;kCAAI;;;;;;;;;;;;;;;;;;AAIvR;GArBgB;;QACC,oKAAgB;QACb,oKAAgB;;;MAFpB","debugId":null}},
    {"offset": {"line": 467, "column": 0}, "map": {"version":3,"sources":["file:///home/bobo/shadcn-builder/packages/designer/src/panels/RightPanel.tsx"],"sourcesContent":["\"use client\";\nimport React from \"react\";\nimport { useDesignerStore } from \"../state/store\";\nimport type { ComponentNode, FormSchema } from \"@shadcn-builder/renderer\";\n\nfunction updateNode(schema: FormSchema, id: string, updater: (n: ComponentNode) => ComponentNode): FormSchema {\n  return {\n    ...schema,\n    components: schema.components.map((n) => (n.id === id ? updater(n) : n)),\n  };\n}\n\nfunction Section({ title, children }: { title: string; children: React.ReactNode }) {\n  return (\n    <div className=\"mb-4\">\n      <div className=\"text-xs uppercase tracking-wide text-slate-500 mb-2\">{title}</div>\n      <div className=\"space-y-2\">{children}</div>\n    </div>\n  );\n}\n\nexport function RightPanel() {\n  const schema = useDesignerStore((s) => s.schema);\n  const setSchema = useDesignerStore((s) => s.setSchema);\n  const selectedId = useDesignerStore((s) => s.selectedId);\n\n  const selected = schema.components.find((n) => n.id === selectedId) || null;\n\n  if (!selected) return <div className=\"text-sm text-slate-500\">未选择组件</div>;\n\n  const setProp = (path: \"properties.text\" | \"attributes.placeholder\" | \"properties.className\", value: string) => {\n    setSchema(\n      updateNode(schema, selected.id, (n) => {\n        if (path === \"properties.text\") {\n          return { ...n, properties: { ...n.properties, text: value } };\n        }\n        if (path === \"properties.className\") {\n          return { ...n, properties: { ...n.properties, className: value } };\n        }\n        if (path === \"attributes.placeholder\") {\n          return { ...n, attributes: { ...(n.attributes || {}), placeholder: value } } as ComponentNode;\n        }\n        return n;\n      })\n    );\n  };\n\n  return (\n    <div>\n      <Section title=\"Label\">\n        {selected.type === \"text\" && (\n          <label className=\"block text-sm\">\n            <span className=\"text-slate-600\">文本</span>\n            <input className=\"mt-1 border rounded px-2 py-1 w-full\" value={(selected as any).properties?.text || \"\"} onChange={(e) => setProp(\"properties.text\", e.target.value)} />\n          </label>\n        )}\n        {selected.type === \"input\" && (\n          <label className=\"block text-sm\">\n            <span className=\"text-slate-600\">占位</span>\n            <input className=\"mt-1 border rounded px-2 py-1 w-full\" value={(selected as any).attributes?.placeholder || \"\"} onChange={(e) => setProp(\"attributes.placeholder\", e.target.value)} />\n          </label>\n        )}\n      </Section>\n      <Section title=\"Grid\">\n        <label className=\"block text-sm\">\n          <span className=\"text-slate-600\">className</span>\n          <input className=\"mt-1 border rounded px-2 py-1 w-full\" value={(selected as any).properties?.className || \"\"} onChange={(e) => setProp(\"properties.className\", e.target.value)} />\n        </label>\n      </Section>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAKA,SAAS,WAAW,MAAkB,EAAE,EAAU,EAAE,OAA4C;IAC9F,OAAO;QACL,GAAG,MAAM;QACT,YAAY,OAAO,UAAU,CAAC,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK,QAAQ,KAAK;IACvE;AACF;AAEA,SAAS,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAgD;IAChF,qBACE,8VAAC;QAAI,WAAU;;0BACb,8VAAC;gBAAI,WAAU;0BAAuD;;;;;;0BACtE,8VAAC;gBAAI,WAAU;0BAAa;;;;;;;;;;;;AAGlC;KAPS;AASF,SAAS;;IACd,MAAM,SAAS,IAAA,oKAAgB;+CAAC,CAAC,IAAM,EAAE,MAAM;;IAC/C,MAAM,YAAY,IAAA,oKAAgB;kDAAC,CAAC,IAAM,EAAE,SAAS;;IACrD,MAAM,aAAa,IAAA,oKAAgB;mDAAC,CAAC,IAAM,EAAE,UAAU;;IAEvD,MAAM,WAAW,OAAO,UAAU,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,eAAe;IAEvE,IAAI,CAAC,UAAU,qBAAO,8VAAC;QAAI,WAAU;kBAAyB;;;;;;IAE9D,MAAM,UAAU,CAAC,MAA6E;QAC5F,UACE,WAAW,QAAQ,SAAS,EAAE,EAAE,CAAC;YAC/B,IAAI,SAAS,mBAAmB;gBAC9B,OAAO;oBAAE,GAAG,CAAC;oBAAE,YAAY;wBAAE,GAAG,EAAE,UAAU;wBAAE,MAAM;oBAAM;gBAAE;YAC9D;YACA,IAAI,SAAS,wBAAwB;gBACnC,OAAO;oBAAE,GAAG,CAAC;oBAAE,YAAY;wBAAE,GAAG,EAAE,UAAU;wBAAE,WAAW;oBAAM;gBAAE;YACnE;YACA,IAAI,SAAS,0BAA0B;gBACrC,OAAO;oBAAE,GAAG,CAAC;oBAAE,YAAY;wBAAE,GAAI,EAAE,UAAU,IAAI,CAAC,CAAC;wBAAG,aAAa;oBAAM;gBAAE;YAC7E;YACA,OAAO;QACT;IAEJ;IAEA,qBACE,8VAAC;;0BACC,8VAAC;gBAAQ,OAAM;;oBACZ,SAAS,IAAI,KAAK,wBACjB,8VAAC;wBAAM,WAAU;;0CACf,8VAAC;gCAAK,WAAU;0CAAiB;;;;;;0CACjC,8VAAC;gCAAM,WAAU;gCAAuC,OAAO,AAAC,SAAiB,UAAU,EAAE,QAAQ;gCAAI,UAAU,CAAC,IAAM,QAAQ,mBAAmB,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;oBAGtK,SAAS,IAAI,KAAK,yBACjB,8VAAC;wBAAM,WAAU;;0CACf,8VAAC;gCAAK,WAAU;0CAAiB;;;;;;0CACjC,8VAAC;gCAAM,WAAU;gCAAuC,OAAO,AAAC,SAAiB,UAAU,EAAE,eAAe;gCAAI,UAAU,CAAC,IAAM,QAAQ,0BAA0B,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;;;;;;;0BAIvL,8VAAC;gBAAQ,OAAM;0BACb,cAAA,8VAAC;oBAAM,WAAU;;sCACf,8VAAC;4BAAK,WAAU;sCAAiB;;;;;;sCACjC,8VAAC;4BAAM,WAAU;4BAAuC,OAAO,AAAC,SAAiB,UAAU,EAAE,aAAa;4BAAI,UAAU,CAAC,IAAM,QAAQ,wBAAwB,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;;;;;;;;;;;;AAKvL;GAlDgB;;QACC,oKAAgB;QACb,oKAAgB;QACf,oKAAgB;;;MAHrB","debugId":null}},
    {"offset": {"line": 684, "column": 0}, "map": {"version":3,"sources":["file:///home/bobo/shadcn-builder/packages/renderer/src/components/Renderer.tsx"],"sourcesContent":["import React from \"react\";\nimport { ComponentNode, FormSchema, RenderContext } from \"../core/schema\";\nimport { ComponentRegistry } from \"../core/registry\";\n\nfunction mergeByViewport(node: ComponentNode, viewport?: RenderContext[\"viewport\"]): ComponentNode {\n  if (!viewport || viewport === \"sm\" || !node.overrides?.[viewport]) return node;\n  const ov = node.overrides[viewport]!;\n  return { ...node, ...ov, properties: { ...node.properties, ...ov.properties } };\n}\n\nexport interface RendererProps {\n  schema: FormSchema;\n  registry: ComponentRegistry;\n  context?: RenderContext;\n  className?: string;\n}\n\nexport function Renderer({ schema, registry, context, className }: RendererProps) {\n  const ctx = context ?? { viewport: \"sm\" };\n\n  const renderNode = (node: ComponentNode) => {\n    const n = mergeByViewport(node, ctx.viewport);\n    const render = registry.get(n.type);\n    if (!render) return null;\n    return render(n, ctx);\n  };\n\n  return (\n    <div className={className}>\n      {schema.components.map((n) => (\n        <React.Fragment key={n.id}>{renderNode(n)}</React.Fragment>\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAIA,SAAS,gBAAgB,IAAmB,EAAE,QAAoC;IAChF,IAAI,CAAC,YAAY,aAAa,QAAQ,CAAC,KAAK,SAAS,EAAE,CAAC,SAAS,EAAE,OAAO;IAC1E,MAAM,KAAK,KAAK,SAAS,CAAC,SAAS;IACnC,OAAO;QAAE,GAAG,IAAI;QAAE,GAAG,EAAE;QAAE,YAAY;YAAE,GAAG,KAAK,UAAU;YAAE,GAAG,GAAG,UAAU;QAAC;IAAE;AAChF;AASO,SAAS,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,SAAS,EAAiB;IAC9E,MAAM,MAAM,WAAW;QAAE,UAAU;IAAK;IAExC,MAAM,aAAa,CAAC;QAClB,MAAM,IAAI,gBAAgB,MAAM,IAAI,QAAQ;QAC5C,MAAM,SAAS,SAAS,GAAG,CAAC,EAAE,IAAI;QAClC,IAAI,CAAC,QAAQ,OAAO;QACpB,OAAO,OAAO,GAAG;IACnB;IAEA,qBACE,8VAAC;QAAI,WAAW;kBACb,OAAO,UAAU,CAAC,GAAG,CAAC,CAAC,kBACtB,8VAAC,yUAAK,CAAC,QAAQ;0BAAa,WAAW;eAAlB,EAAE,EAAE;;;;;;;;;;AAIjC;KAjBgB","debugId":null}},
    {"offset": {"line": 739, "column": 0}, "map": {"version":3,"sources":["file:///home/bobo/shadcn-builder/packages/designer/src/utils/grid.ts"],"sourcesContent":["import type { ComponentNode } from \"@shadcn-builder/renderer\";\n\nexport const GRID_COLUMNS = 12;\n\nexport function getSpan(node: ComponentNode): number {\n  const raw = (node.properties as any)?.style?.colSpan;\n  const n = typeof raw === \"string\" ? parseInt(raw, 10) : typeof raw === \"number\" ? raw : undefined;\n  if (!n || Number.isNaN(n)) return GRID_COLUMNS; // default full width\n  return Math.max(1, Math.min(GRID_COLUMNS, n));\n}\n\nexport function setSpan(node: ComponentNode, span: number): ComponentNode {\n  const style = { ...((node.properties as any)?.style || {}), colSpan: String(span) };\n  return { ...node, properties: { ...(node.properties || {}), style } } as ComponentNode;\n}\n\nexport function computeRows(components: ComponentNode[]): ComponentNode[][] {\n  const rows: ComponentNode[][] = [];\n  let current: ComponentNode[] = [];\n  let used = 0;\n  for (const c of components) {\n    const span = getSpan(c);\n    if (used + span > GRID_COLUMNS && current.length > 0) {\n      rows.push(current);\n      current = [];\n      used = 0;\n    }\n    current.push(c);\n    used += span;\n  }\n  if (current.length) rows.push(current);\n  return rows;\n}\n\nexport function rebalanceRowSpans(row: ComponentNode[]): ComponentNode[] {\n  if (row.length === 0) return row;\n  const base = Math.max(1, Math.floor(GRID_COLUMNS / row.length));\n  const remainder = GRID_COLUMNS - base * row.length;\n  return row.map((n, idx) => setSpan(n, base + (idx < remainder ? 1 : 0)));\n}\n\nexport function rebalanceAfterMove(list: ComponentNode[], fromIndex: number, toIndex: number): ComponentNode[] {\n  const next = [...list];\n  const [moved] = next.splice(fromIndex, 1);\n  next.splice(toIndex, 0, moved);\n  const rows = computeRows(next);\n  // 仅对受影响的行做均分，这里简单对所有行均分\n  const balanced = rows.flatMap((r) => rebalanceRowSpans(r));\n  return balanced;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAEO,MAAM,eAAe;AAErB,SAAS,QAAQ,IAAmB;IACzC,MAAM,MAAO,KAAK,UAAU,EAAU,OAAO;IAC7C,MAAM,IAAI,OAAO,QAAQ,WAAW,SAAS,KAAK,MAAM,OAAO,QAAQ,WAAW,MAAM;IACxF,IAAI,CAAC,KAAK,OAAO,KAAK,CAAC,IAAI,OAAO,cAAc,qBAAqB;IACrE,OAAO,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,cAAc;AAC5C;AAEO,SAAS,QAAQ,IAAmB,EAAE,IAAY;IACvD,MAAM,QAAQ;QAAE,GAAI,AAAC,KAAK,UAAU,EAAU,SAAS,CAAC,CAAC;QAAG,SAAS,OAAO;IAAM;IAClF,OAAO;QAAE,GAAG,IAAI;QAAE,YAAY;YAAE,GAAI,KAAK,UAAU,IAAI,CAAC,CAAC;YAAG;QAAM;IAAE;AACtE;AAEO,SAAS,YAAY,UAA2B;IACrD,MAAM,OAA0B,EAAE;IAClC,IAAI,UAA2B,EAAE;IACjC,IAAI,OAAO;IACX,KAAK,MAAM,KAAK,WAAY;QAC1B,MAAM,OAAO,QAAQ;QACrB,IAAI,OAAO,OAAO,gBAAgB,QAAQ,MAAM,GAAG,GAAG;YACpD,KAAK,IAAI,CAAC;YACV,UAAU,EAAE;YACZ,OAAO;QACT;QACA,QAAQ,IAAI,CAAC;QACb,QAAQ;IACV;IACA,IAAI,QAAQ,MAAM,EAAE,KAAK,IAAI,CAAC;IAC9B,OAAO;AACT;AAEO,SAAS,kBAAkB,GAAoB;IACpD,IAAI,IAAI,MAAM,KAAK,GAAG,OAAO;IAC7B,MAAM,OAAO,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,eAAe,IAAI,MAAM;IAC7D,MAAM,YAAY,eAAe,OAAO,IAAI,MAAM;IAClD,OAAO,IAAI,GAAG,CAAC,CAAC,GAAG,MAAQ,QAAQ,GAAG,OAAO,CAAC,MAAM,YAAY,IAAI,CAAC;AACvE;AAEO,SAAS,mBAAmB,IAAqB,EAAE,SAAiB,EAAE,OAAe;IAC1F,MAAM,OAAO;WAAI;KAAK;IACtB,MAAM,CAAC,MAAM,GAAG,KAAK,MAAM,CAAC,WAAW;IACvC,KAAK,MAAM,CAAC,SAAS,GAAG;IACxB,MAAM,OAAO,YAAY;IACzB,wBAAwB;IACxB,MAAM,WAAW,KAAK,OAAO,CAAC,CAAC,IAAM,kBAAkB;IACvD,OAAO;AACT","debugId":null}},
    {"offset": {"line": 814, "column": 0}, "map": {"version":3,"sources":["file:///home/bobo/shadcn-builder/packages/designer/src/Canvas.tsx"],"sourcesContent":["\"use client\";\nimport React, { useMemo } from \"react\";\nimport { Renderer, type FormSchema, type ComponentNode } from \"@shadcn-builder/renderer\";\nimport { useDesignerStore } from \"./state/store\";\nimport {\n  DndContext,\n  PointerSensor,\n  useSensor,\n  closestCenter,\n  DragEndEvent,\n} from \"@dnd-kit/core\";\nimport {\n  SortableContext,\n  verticalListSortingStrategy,\n  useSortable,\n  arrayMove,\n} from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\nimport { computeRows, GRID_COLUMNS } from \"./utils/grid\";\n\nconst viewportEditorStyles: Record<\"sm\" | \"md\" | \"lg\", string> = {\n  sm: \"w-[370px]\",\n  md: \"w-[818px]\",\n  lg: \"w-[1074px]\",\n};\n\nfunction getSpan(node: ComponentNode): number {\n  const raw = (node.properties as any)?.style?.colSpan;\n  const n = typeof raw === \"string\" ? parseInt(raw, 10) : typeof raw === \"number\" ? raw : undefined;\n  if (!n || Number.isNaN(n)) return GRID_COLUMNS;\n  return Math.max(1, Math.min(GRID_COLUMNS, n));\n}\n\nfunction SortableItem({ id, children, selected, onClick }: { id: string; children: React.ReactNode; selected: boolean; onClick: () => void; }) {\n  const { attributes, listeners, setNodeRef, transform, transition } = useSortable({ id });\n  const style: React.CSSProperties = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n  };\n  return (\n    <div ref={setNodeRef} style={style} {...attributes} {...listeners} onClick={onClick} className={`rounded ${selected ? \"ring-2 ring-blue-500\" : \"\"}`}>\n      {children}\n    </div>\n  );\n}\n\nexport function Canvas({ registry, viewport }: { registry: any; viewport: \"sm\" | \"md\" | \"lg\" }) {\n  const schema = useDesignerStore((s) => s.schema);\n  const setSchema = useDesignerStore((s) => s.setSchema);\n  const selectedId = useDesignerStore((s) => s.selectedId);\n  const select = useDesignerStore((s) => s.select);\n\n  const ids = useMemo(() => schema.components.map((n) => n.id), [schema.components]);\n  const rows = useMemo(() => computeRows(schema.components), [schema.components]);\n\n  const pointer = useSensor(PointerSensor, { activationConstraint: { distance: 8 } });\n  const sensors = useMemo(() => [pointer], [pointer]);\n\n  const onDragEnd = (event: DragEndEvent) => {\n    const { active, over } = event;\n    if (!over || active.id === over.id) return;\n    const oldIndex = ids.indexOf(active.id as string);\n    const newIndex = ids.indexOf(over.id as string);\n    // 先移动，再按行重新分配 colSpan\n    const moved = arrayMove(schema.components, oldIndex, newIndex);\n    const flat: ComponentNode[] = [];\n    computeRows(moved).forEach((row) => {\n      const base = Math.max(1, Math.floor(GRID_COLUMNS / row.length));\n      const remainder = GRID_COLUMNS - base * row.length;\n      row.forEach((n, idx) => {\n        const span = base + (idx < remainder ? 1 : 0);\n        const style = { ...((n.properties as any)?.style || {}), colSpan: String(span) };\n        flat.push({ ...n, properties: { ...(n.properties || {}), style } } as ComponentNode);\n      });\n    });\n    setSchema({ ...schema, components: flat });\n  };\n\n  return (\n    <div className=\"px-4 pb-10\">\n      <div className={`mx-auto ${viewportEditorStyles[viewport]} bg-white border rounded-md shadow-sm p-4`}>\n        <div className=\"mb-2 text-sm text-slate-500\">拖拽条目可重排；按行自动均分 colSpan；多于一行将自动换行。</div>\n        <DndContext sensors={sensors} collisionDetection={closestCenter} onDragEnd={onDragEnd}>\n          <SortableContext items={ids} strategy={verticalListSortingStrategy}>\n            <div className=\"space-y-4\">\n              {rows.map((row, rIndex) => (\n                <div key={`row-${rIndex}`} style={{ display: \"grid\", gridTemplateColumns: `repeat(${GRID_COLUMNS}, minmax(0, 1fr))`, gap: 12 }}>\n                  {row.map((n) => {\n                    const span = getSpan(n);\n                    return (\n                      <div key={n.id} style={{ gridColumn: `span ${span} / span ${span}` }} className=\"border rounded p-2 bg-white\">\n                        <SortableItem id={n.id} selected={selectedId === n.id} onClick={() => select(n.id)}>\n                          <div className=\"flex items-center gap-2 mb-2\">\n                            <span className=\"text-xs text-slate-500\">{n.type}</span>\n                          </div>\n                          <Renderer schema={{ components: [n] } as FormSchema} registry={registry} context={{ viewport }} />\n                        </SortableItem>\n                      </div>\n                    );\n                  })}\n                </div>\n              ))}\n            </div>\n          </SortableContext>\n        </DndContext>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1079, "column": 0}, "map": {"version":3,"sources":["file:///home/bobo/shadcn-builder/packages/designer/src/ui/Header.tsx"],"sourcesContent":["\"use client\";\nimport React from \"react\";\nimport { Monitor, Smartphone, Tablet, PanelsTopLeft, Redo2, Undo2 } from \"lucide-react\";\nimport { useDesignerStore } from \"../state/store\";\n\nconst viewportItems: { value: \"sm\" | \"md\" | \"lg\"; label: string; icon: React.ComponentType<{ className?: string }> }[] = [\n  { value: \"sm\", label: \"移动端\", icon: Smartphone },\n  { value: \"md\", label: \"平板\", icon: Tablet },\n  { value: \"lg\", label: \"桌面\", icon: Monitor },\n];\n\nfunction ToolbarButton({ icon: Icon, label, shortcut, onClick, disabled }: {\n  icon: React.ComponentType<{ className?: string }>;\n  label: string;\n  shortcut?: string;\n  onClick?: () => void;\n  disabled?: boolean;\n}) {\n  return (\n    <button\n      type=\"button\"\n      onClick={onClick}\n      disabled={disabled}\n      className={`flex items-center gap-1 rounded-md border px-2 py-1 text-xs transition ${\n        disabled ? \"opacity-50 cursor-not-allowed\" : \"hover:bg-slate-100\"\n      }`}\n    >\n      <Icon className=\"h-3.5 w-3.5\" />\n      <span>{label}</span>\n      {shortcut ? <span className=\"text-[10px] text-slate-500\">{shortcut}</span> : null}\n    </button>\n  );\n}\n\nfunction ViewportSwitch() {\n  const viewport = useDesignerStore((state) => state.viewport);\n  const setViewport = useDesignerStore((state) => state.setViewport);\n  return (\n    <div className=\"flex items-center gap-1 rounded-md border px-1 py-1\">\n      {viewportItems.map((item) => {\n        const Icon = item.icon;\n        const active = item.value === viewport;\n        return (\n          <button\n            key={item.value}\n            type=\"button\"\n            onClick={() => setViewport(item.value)}\n            className={`flex items-center gap-1 rounded px-2 py-1 text-xs transition ${\n              active ? \"bg-slate-900 text-white\" : \"hover:bg-slate-100\"\n            }`}\n          >\n            <Icon className=\"h-3.5 w-3.5\" />\n            <span>{item.label}</span>\n          </button>\n        );\n      })}\n    </div>\n  );\n}\n\nexport function Header({ onToggleJson, jsonVisible }: { onToggleJson?: () => void; jsonVisible?: boolean }) {\n  const undo = useDesignerStore((state) => state.undo);\n  const redo = useDesignerStore((state) => state.redo);\n  const canUndo = useDesignerStore((state) => state.history.past.length > 0);\n  const canRedo = useDesignerStore((state) => state.history.future.length > 0);\n  return (\n    <div className=\"flex h-14 shrink-0 items-center gap-3 border-b bg-white/80 px-4 backdrop-blur supports-[backdrop-filter]:bg-white/60\">\n      <div className=\"text-sm font-medium\">Form Designer</div>\n      <div className=\"flex items-center gap-2\">\n        <ToolbarButton icon={Undo2} label=\"撤销\" shortcut=\"⌘Z\" onClick={undo} disabled={!canUndo} />\n        <ToolbarButton icon={Redo2} label=\"重做\" shortcut=\"⌘⇧Z\" onClick={redo} disabled={!canRedo} />\n      </div>\n      <div className=\"ml-auto flex items-center gap-2\">\n        <ViewportSwitch />\n        <ToolbarButton\n          icon={PanelsTopLeft}\n          label={jsonVisible ? \"隐藏 JSON\" : \"查看 JSON\"}\n          onClick={onToggleJson}\n        />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAHA;;;AAKA,MAAM,gBAAmH;IACvH;QAAE,OAAO;QAAM,OAAO;QAAO,MAAM,mTAAU;IAAC;IAC9C;QAAE,OAAO;QAAM,OAAO;QAAM,MAAM,uSAAM;IAAC;IACzC;QAAE,OAAO;QAAM,OAAO;QAAM,MAAM,0SAAO;IAAC;CAC3C;AAED,SAAS,cAAc,EAAE,MAAM,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAMtE;IACC,qBACE,8VAAC;QACC,MAAK;QACL,SAAS;QACT,UAAU;QACV,WAAW,CAAC,uEAAuE,EACjF,WAAW,kCAAkC,sBAC7C;;0BAEF,8VAAC;gBAAK,WAAU;;;;;;0BAChB,8VAAC;0BAAM;;;;;;YACN,yBAAW,8VAAC;gBAAK,WAAU;0BAA8B;;;;;uBAAmB;;;;;;;AAGnF;KArBS;AAuBT,SAAS;;IACP,MAAM,WAAW,IAAA,oKAAgB;qDAAC,CAAC,QAAU,MAAM,QAAQ;;IAC3D,MAAM,cAAc,IAAA,oKAAgB;wDAAC,CAAC,QAAU,MAAM,WAAW;;IACjE,qBACE,8VAAC;QAAI,WAAU;kBACZ,cAAc,GAAG,CAAC,CAAC;YAClB,MAAM,OAAO,KAAK,IAAI;YACtB,MAAM,SAAS,KAAK,KAAK,KAAK;YAC9B,qBACE,8VAAC;gBAEC,MAAK;gBACL,SAAS,IAAM,YAAY,KAAK,KAAK;gBACrC,WAAW,CAAC,6DAA6D,EACvE,SAAS,4BAA4B,sBACrC;;kCAEF,8VAAC;wBAAK,WAAU;;;;;;kCAChB,8VAAC;kCAAM,KAAK,KAAK;;;;;;;eARZ,KAAK,KAAK;;;;;QAWrB;;;;;;AAGN;GAxBS;;QACU,oKAAgB;QACb,oKAAgB;;;MAF7B;AA0BF,SAAS,OAAO,EAAE,YAAY,EAAE,WAAW,EAAwD;;IACxG,MAAM,OAAO,IAAA,oKAAgB;yCAAC,CAAC,QAAU,MAAM,IAAI;;IACnD,MAAM,OAAO,IAAA,oKAAgB;yCAAC,CAAC,QAAU,MAAM,IAAI;;IACnD,MAAM,UAAU,IAAA,oKAAgB;4CAAC,CAAC,QAAU,MAAM,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG;;IACxE,MAAM,UAAU,IAAA,oKAAgB;4CAAC,CAAC,QAAU,MAAM,OAAO,CAAC,MAAM,CAAC,MAAM,GAAG;;IAC1E,qBACE,8VAAC;QAAI,WAAU;;0BACb,8VAAC;gBAAI,WAAU;0BAAsB;;;;;;0BACrC,8VAAC;gBAAI,WAAU;;kCACb,8VAAC;wBAAc,MAAM,wSAAK;wBAAE,OAAM;wBAAK,UAAS;wBAAK,SAAS;wBAAM,UAAU,CAAC;;;;;;kCAC/E,8VAAC;wBAAc,MAAM,wSAAK;wBAAE,OAAM;wBAAK,UAAS;wBAAM,SAAS;wBAAM,UAAU,CAAC;;;;;;;;;;;;0BAElF,8VAAC;gBAAI,WAAU;;kCACb,8VAAC;;;;;kCACD,8VAAC;wBACC,MAAM,oUAAa;wBACnB,OAAO,cAAc,YAAY;wBACjC,SAAS;;;;;;;;;;;;;;;;;;AAKnB;IAtBgB;;QACD,oKAAgB;QAChB,oKAAgB;QACb,oKAAgB;QAChB,oKAAgB;;;MAJlB","debugId":null}},
    {"offset": {"line": 1308, "column": 0}, "map": {"version":3,"sources":["file:///home/bobo/shadcn-builder/packages/designer/src/Designer.tsx"],"sourcesContent":["\"use client\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { ComponentRegistry, type FormSchema } from \"@shadcn-builder/renderer\";\nimport { useDesignerStore } from \"./state/store\";\nimport { LeftPanel } from \"./panels/LeftPanel\";\nimport { RightPanel } from \"./panels/RightPanel\";\nimport { Canvas } from \"./Canvas\";\nimport { Header } from \"./ui/Header\";\n\nfunction isEditingElement(target: EventTarget | null): boolean {\n  if (!(target instanceof HTMLElement)) return false;\n  if (target.isContentEditable) return true;\n  const editable = target.closest(\"input, textarea, select, [contenteditable=true]\");\n  return Boolean(editable);\n}\n\nexport function Designer({\n  value,\n  defaultValue,\n  onChange,\n  registry,\n  viewport = \"sm\",\n  showJSON,\n}: {\n  value?: FormSchema;\n  defaultValue?: FormSchema;\n  onChange?: (next: FormSchema) => void;\n  registry: ComponentRegistry;\n  viewport?: \"sm\" | \"md\" | \"lg\";\n  showJSON?: boolean;\n}) {\n  const schema = useDesignerStore((state) => state.schema);\n  const setSchema = useDesignerStore((state) => state.setSchema);\n  const setViewport = useDesignerStore((state) => state.setViewport);\n  const undo = useDesignerStore((state) => state.undo);\n  const redo = useDesignerStore((state) => state.redo);\n  const duplicateSelected = useDesignerStore((state) => state.duplicateSelected);\n  const removeSelected = useDesignerStore((state) => state.removeSelected);\n  const currentViewport = useDesignerStore((state) => state.viewport);\n\n  const [jsonVisible, setJsonVisible] = useState(Boolean(showJSON));\n  const isControlled = value !== undefined;\n\n  useEffect(() => {\n    setViewport(viewport);\n  }, [viewport, setViewport]);\n\n  useEffect(() => {\n    if (showJSON !== undefined) {\n      setJsonVisible(Boolean(showJSON));\n    }\n  }, [showJSON]);\n\n  useEffect(() => {\n    if (!isControlled && defaultValue) {\n      setSchema(defaultValue, { pushHistory: false, clearFuture: true });\n    }\n  }, [isControlled, defaultValue, setSchema]);\n\n  useEffect(() => {\n    if (isControlled) {\n      const next = value ?? { components: [] };\n      setSchema(next, { pushHistory: false, clearFuture: false });\n    }\n  }, [isControlled, value, setSchema]);\n\n  useEffect(() => {\n    if (!isControlled && onChange) {\n      onChange(schema);\n    }\n  }, [schema, isControlled, onChange]);\n\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (isEditingElement(event.target)) return;\n      const key = event.key.toLowerCase();\n      const isMod = event.metaKey || event.ctrlKey;\n      if (isMod && !event.shiftKey && key === \"z\") {\n        event.preventDefault();\n        undo();\n        return;\n      }\n      if ((isMod && event.shiftKey && key === \"z\") || (isMod && key === \"y\")) {\n        event.preventDefault();\n        redo();\n        return;\n      }\n      if (isMod && key === \"d\") {\n        event.preventDefault();\n        duplicateSelected();\n        return;\n      }\n      if (key === \"delete\" || key === \"backspace\") {\n        event.preventDefault();\n        removeSelected();\n      }\n    };\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [undo, redo, duplicateSelected, removeSelected]);\n\n  const schemaPreview = useMemo(() => JSON.stringify(schema, null, 2), [schema]);\n\n  return (\n    <div className=\"relative flex h-full w-full flex-col overflow-hidden\">\n      <Header onToggleJson={() => setJsonVisible((prev) => !prev)} jsonVisible={jsonVisible} />\n      <div className=\"flex min-h-0 flex-1 bg-slate-100\">\n        <aside className=\"hidden w-[260px] shrink-0 border-r bg-white/70 backdrop-blur md:block\">\n          <div className=\"h-full overflow-y-auto p-4\">\n            <LeftPanel />\n          </div>\n        </aside>\n        <main className=\"flex-1 overflow-auto p-6\">\n          <Canvas registry={registry} viewport={currentViewport} />\n        </main>\n        <aside className=\"hidden w-[320px] shrink-0 border-l bg-white md:block\">\n          <div className=\"h-full overflow-y-auto p-4\">\n            <RightPanel />\n          </div>\n        </aside>\n      </div>\n      {jsonVisible ? (\n        <div className=\"pointer-events-auto absolute right-6 top-24 z-40 w-[420px] overflow-hidden rounded-xl border bg-white shadow-2xl\">\n          <div className=\"flex items-center justify-between border-b px-3 py-2 text-xs font-medium text-slate-500\">\n            <span>Schema JSON</span>\n            <button\n              type=\"button\"\n              className=\"text-slate-500 transition hover:text-slate-900\"\n              onClick={() => setJsonVisible(false)}\n            >\n              关闭\n            </button>\n          </div>\n          <pre className=\"h-[50vh] overflow-auto bg-slate-950 p-4 text-[11px] leading-relaxed text-slate-100\">\n            {schemaPreview}\n          </pre>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AAEA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASA,SAAS,iBAAiB,MAA0B;IAClD,IAAI,CAAC,CAAC,kBAAkB,WAAW,GAAG,OAAO;IAC7C,IAAI,OAAO,iBAAiB,EAAE,OAAO;IACrC,MAAM,WAAW,OAAO,OAAO,CAAC;IAChC,OAAO,QAAQ;AACjB;AAEO,SAAS,SAAS,EACvB,KAAK,EACL,YAAY,EACZ,QAAQ,EACR,QAAQ,EACR,WAAW,IAAI,EACf,QAAQ,EAQT;;IACC,MAAM,SAAS,IAAA,oKAAgB;6CAAC,CAAC,QAAU,MAAM,MAAM;;IACvD,MAAM,YAAY,IAAA,oKAAgB;gDAAC,CAAC,QAAU,MAAM,SAAS;;IAC7D,MAAM,cAAc,IAAA,oKAAgB;kDAAC,CAAC,QAAU,MAAM,WAAW;;IACjE,MAAM,OAAO,IAAA,oKAAgB;2CAAC,CAAC,QAAU,MAAM,IAAI;;IACnD,MAAM,OAAO,IAAA,oKAAgB;2CAAC,CAAC,QAAU,MAAM,IAAI;;IACnD,MAAM,oBAAoB,IAAA,oKAAgB;wDAAC,CAAC,QAAU,MAAM,iBAAiB;;IAC7E,MAAM,iBAAiB,IAAA,oKAAgB;qDAAC,CAAC,QAAU,MAAM,cAAc;;IACvE,MAAM,kBAAkB,IAAA,oKAAgB;sDAAC,CAAC,QAAU,MAAM,QAAQ;;IAElE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,0UAAQ,EAAC,QAAQ;IACvD,MAAM,eAAe,UAAU;IAE/B,IAAA,2UAAS;8BAAC;YACR,YAAY;QACd;6BAAG;QAAC;QAAU;KAAY;IAE1B,IAAA,2UAAS;8BAAC;YACR,IAAI,aAAa,WAAW;gBAC1B,eAAe,QAAQ;YACzB;QACF;6BAAG;QAAC;KAAS;IAEb,IAAA,2UAAS;8BAAC;YACR,IAAI,CAAC,gBAAgB,cAAc;gBACjC,UAAU,cAAc;oBAAE,aAAa;oBAAO,aAAa;gBAAK;YAClE;QACF;6BAAG;QAAC;QAAc;QAAc;KAAU;IAE1C,IAAA,2UAAS;8BAAC;YACR,IAAI,cAAc;gBAChB,MAAM,OAAO,SAAS;oBAAE,YAAY,EAAE;gBAAC;gBACvC,UAAU,MAAM;oBAAE,aAAa;oBAAO,aAAa;gBAAM;YAC3D;QACF;6BAAG;QAAC;QAAc;QAAO;KAAU;IAEnC,IAAA,2UAAS;8BAAC;YACR,IAAI,CAAC,gBAAgB,UAAU;gBAC7B,SAAS;YACX;QACF;6BAAG;QAAC;QAAQ;QAAc;KAAS;IAEnC,IAAA,2UAAS;8BAAC;YACR,MAAM;oDAAgB,CAAC;oBACrB,IAAI,iBAAiB,MAAM,MAAM,GAAG;oBACpC,MAAM,MAAM,MAAM,GAAG,CAAC,WAAW;oBACjC,MAAM,QAAQ,MAAM,OAAO,IAAI,MAAM,OAAO;oBAC5C,IAAI,SAAS,CAAC,MAAM,QAAQ,IAAI,QAAQ,KAAK;wBAC3C,MAAM,cAAc;wBACpB;wBACA;oBACF;oBACA,IAAI,AAAC,SAAS,MAAM,QAAQ,IAAI,QAAQ,OAAS,SAAS,QAAQ,KAAM;wBACtE,MAAM,cAAc;wBACpB;wBACA;oBACF;oBACA,IAAI,SAAS,QAAQ,KAAK;wBACxB,MAAM,cAAc;wBACpB;wBACA;oBACF;oBACA,IAAI,QAAQ,YAAY,QAAQ,aAAa;wBAC3C,MAAM,cAAc;wBACpB;oBACF;gBACF;;YACA,OAAO,gBAAgB,CAAC,WAAW;YACnC;sCAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;;QACrD;6BAAG;QAAC;QAAM;QAAM;QAAmB;KAAe;IAElD,MAAM,gBAAgB,IAAA,yUAAO;2CAAC,IAAM,KAAK,SAAS,CAAC,QAAQ,MAAM;0CAAI;QAAC;KAAO;IAE7E,qBACE,8VAAC;QAAI,WAAU;;0BACb,8VAAC,yJAAM;gBAAC,cAAc,IAAM,eAAe,CAAC,OAAS,CAAC;gBAAO,aAAa;;;;;;0BAC1E,8VAAC;gBAAI,WAAU;;kCACb,8VAAC;wBAAM,WAAU;kCACf,cAAA,8VAAC;4BAAI,WAAU;sCACb,cAAA,8VAAC,mKAAS;;;;;;;;;;;;;;;kCAGd,8VAAC;wBAAK,WAAU;kCACd,cAAA,8VAAC,mJAAM;4BAAC,UAAU;4BAAU,UAAU;;;;;;;;;;;kCAExC,8VAAC;wBAAM,WAAU;kCACf,cAAA,8VAAC;4BAAI,WAAU;sCACb,cAAA,8VAAC,qKAAU;;;;;;;;;;;;;;;;;;;;;YAIhB,4BACC,8VAAC;gBAAI,WAAU;;kCACb,8VAAC;wBAAI,WAAU;;0CACb,8VAAC;0CAAK;;;;;;0CACN,8VAAC;gCACC,MAAK;gCACL,WAAU;gCACV,SAAS,IAAM,eAAe;0CAC/B;;;;;;;;;;;;kCAIH,8VAAC;wBAAI,WAAU;kCACZ;;;;;;;;;;;uBAGH;;;;;;;AAGV;GA5HgB;;QAeC,oKAAgB;QACb,oKAAgB;QACd,oKAAgB;QACvB,oKAAgB;QAChB,oKAAgB;QACH,oKAAgB;QACnB,oKAAgB;QACf,oKAAgB;;;KAtB1B","debugId":null}},
    {"offset": {"line": 1610, "column": 0}, "map": {"version":3,"sources":["file:///home/bobo/shadcn-builder/packages/renderer/src/core/registry.ts"],"sourcesContent":["import { ComponentNode, RenderContext } from \"./schema\";\n\nexport type ComponentRender = (node: ComponentNode, ctx: RenderContext) => React.ReactNode;\n\nexport class ComponentRegistry {\n  private map = new Map<string, ComponentRender>();\n  register(type: string, render: ComponentRender) {\n    this.map.set(type, render);\n  }\n  get(type: string) {\n    return this.map.get(type);\n  }\n}\n"],"names":[],"mappings":";;;;AAIO,MAAM;IACH,MAAM,IAAI,MAA+B;IACjD,SAAS,IAAY,EAAE,MAAuB,EAAE;QAC9C,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM;IACrB;IACA,IAAI,IAAY,EAAE;QAChB,OAAO,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;IACtB;AACF","debugId":null}},
    {"offset": {"line": 1630, "column": 0}, "map": {"version":3,"sources":["file:///home/bobo/shadcn-builder/packages/renderer/src/registry/shadcn-basic.tsx"],"sourcesContent":["import React from \"react\";\nimport { ComponentRegistry } from \"../core/registry\";\nimport type { ComponentNode, RenderContext } from \"../core/schema\";\n\nfunction TextRender(node: ComponentNode, _ctx: RenderContext) {\n  const text = (node.properties as any)?.text ?? (node.attributes as any)?.text ?? \"文本组件\";\n  const className = (node.properties as any)?.className ?? (node.attributes as any)?.class ?? \"\";\n  return <div className={className}>{text}</div>;\n}\n\nfunction InputRender(node: ComponentNode, _ctx: RenderContext) {\n  const placeholder = (node.attributes as any)?.placeholder ?? \"请输入\";\n  const type = (node.attributes as any)?.type ?? \"text\";\n  const className = (node.properties as any)?.className ?? (node.attributes as any)?.class ?? \"\";\n  const icon = (node.properties as any)?.style?.icon as string | undefined;\n  // 简化：不内置图标组，先渲染纯 input\n  return <input placeholder={placeholder} type={type} className={className} data-icon={icon ?? undefined} />;\n}\n\nexport function createBasicRegistry() {\n  const registry = new ComponentRegistry();\n  registry.register(\"text\", TextRender);\n  registry.register(\"form-text\", TextRender);\n  registry.register(\"input\", InputRender);\n  registry.register(\"form-input\", InputRender);\n  return registry;\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAGA,SAAS,WAAW,IAAmB,EAAE,IAAmB;IAC1D,MAAM,OAAO,AAAC,KAAK,UAAU,EAAU,QAAS,KAAK,UAAU,EAAU,QAAQ;IACjF,MAAM,YAAY,AAAC,KAAK,UAAU,EAAU,aAAc,KAAK,UAAU,EAAU,SAAS;IAC5F,qBAAO,8VAAC;QAAI,WAAW;kBAAY;;;;;;AACrC;KAJS;AAMT,SAAS,YAAY,IAAmB,EAAE,IAAmB;IAC3D,MAAM,cAAc,AAAC,KAAK,UAAU,EAAU,eAAe;IAC7D,MAAM,OAAO,AAAC,KAAK,UAAU,EAAU,QAAQ;IAC/C,MAAM,YAAY,AAAC,KAAK,UAAU,EAAU,aAAc,KAAK,UAAU,EAAU,SAAS;IAC5F,MAAM,OAAQ,KAAK,UAAU,EAAU,OAAO;IAC9C,uBAAuB;IACvB,qBAAO,8VAAC;QAAM,aAAa;QAAa,MAAM;QAAM,WAAW;QAAW,aAAW,QAAQ;;;;;;AAC/F;MAPS;AASF,SAAS;IACd,MAAM,WAAW,IAAI,uKAAiB;IACtC,SAAS,QAAQ,CAAC,QAAQ;IAC1B,SAAS,QAAQ,CAAC,aAAa;IAC/B,SAAS,QAAQ,CAAC,SAAS;IAC3B,SAAS,QAAQ,CAAC,cAAc;IAChC,OAAO;AACT","debugId":null}},
    {"offset": {"line": 1687, "column": 0}, "map": {"version":3,"sources":["file:///home/bobo/shadcn-builder/apps/playground/app/designer-demo/page.tsx"],"sourcesContent":["\"use client\";\nimport { Designer } from \"@shadcn-builder/designer\";\nimport { createBasicRegistry } from \"@shadcn-builder/renderer\";\nimport React, { useState } from \"react\";\n\nconst registry = createBasicRegistry();\n\nexport default function Page() {\n  const [schema, setSchema] = useState({ components: [{ id: \"text-1\", type: \"text\", properties: { text: \"可编辑文本\", className: \"\" } }] });\n  return (\n    <main style={{ padding: 24, height: \"calc(100vh - 48px)\" }}>\n      <h2>Designer Demo</h2>\n      <p className=\"text-sm text-slate-600\">左侧“物料”可添加组件；点击画布内“选择”按钮后，右侧可编辑属性；用上下箭头重排。</p>\n      <div style={{ height: \"100%\", border: \"1px solid #e5e7eb\", marginTop: 12 }}>\n        <Designer value={schema as any} onChange={setSchema as any} registry={registry} showJSON />\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;;;AAHA;;;;AAKA,MAAM,WAAW,IAAA,qLAAmB;AAErB,SAAS;;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,0UAAQ,EAAC;QAAE,YAAY;YAAC;gBAAE,IAAI;gBAAU,MAAM;gBAAQ,YAAY;oBAAE,MAAM;oBAAS,WAAW;gBAAG;YAAE;SAAE;IAAC;IAClI,qBACE,8VAAC;QAAK,OAAO;YAAE,SAAS;YAAI,QAAQ;QAAqB;;0BACvD,8VAAC;0BAAG;;;;;;0BACJ,8VAAC;gBAAE,WAAU;0BAAyB;;;;;;0BACtC,8VAAC;gBAAI,OAAO;oBAAE,QAAQ;oBAAQ,QAAQ;oBAAqB,WAAW;gBAAG;0BACvE,cAAA,8VAAC,uJAAQ;oBAAC,OAAO;oBAAe,UAAU;oBAAkB,UAAU;oBAAU,QAAQ;;;;;;;;;;;;;;;;;AAIhG;GAXwB;KAAA","debugId":null}}]
}